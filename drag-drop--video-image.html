<!DOCTYPE html >
<html>
<head>
    <title>檔案拖曳讀取－視頻與圖檔</title>
    <style type="text/css">

    </style>
    <script>
        var fileReader;
        function dragoverHandler(event) {
            event.preventDefault();
        }
        function dropHandler(event) {
            event.preventDefault();
            var file = event.dataTransfer.files[0];
            document.getElementById('message').innerHTML = file.name;
            fileReader = new FileReader();
            var fileType = file.type;

            if (fileType == 'image/jpeg') {
                fileReader.onload = openfile;
                fileReader.readAsDataURL(file)
            } else if (fileType == 'video/mp4' ||
                        fileType == 'video/ogg' ||
                         fileType == 'video/webm') {
                fileReader.onload = openFileVideo;
                fileReader.readAsDataURL(file);
            } else {
                alert('只接受 jpg 圖片，或是 mp4、ogg、webm 視訊檔 ! ');
            }
        }
        function openfile(event) {
            var img = event.target.result;
            var imgx = document.getElementById('ximg');
            imgx.src = img;
        }
        function openFileVideo(event) {
            var v = document.getElementById('xvideo');
            v.src = event.target.result;
            v.load();
            v.play();
        }   
    </script>
</head>
<body>
<div id="drop_zone;"
    ondragover="dragoverHandler(event)"
    ondrop="dropHandler(event)" >  
    <div style="float:left;width:420px;height:auto;border:1px dotted gray;" >
        <img id="ximg"   style="width:400px;"  />
    </div>
    <div style="float:left;width:520px;height:auto;border:1px dotted gray;" >
        <video id="xvideo"  width=500px style=""  />
    </div>
    <p>    <output id="message"   /></p> 
</div>
</body>
</html>
